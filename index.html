<!doctype html>
<html lang="ms" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ramadan Aidin Hebat!</title>
  <script src="https://cdn.tailwindcss.com/3.4.17"></script>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
  <style>
    * { font-family: 'Nunito', sans-serif; -webkit-tap-highlight-color: transparent; }
    
    /* Animasi Wajah Aidin */
    .aidin-photo {
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      border: 4px solid;
    }
    .status-done { border-color: #facc15; transform: scale(1.05) rotate(3deg); filter: drop-shadow(0 0 8px rgba(250, 204, 21, 0.5)); }
    .status-not-done { border-color: #475569; opacity: 0.7; filter: grayscale(0.5); }

    /* Animasi Kad */
    .activity-card { transition: all 0.3s ease; }
    .activity-card:active { transform: scale(0.9); }
    
    /* Progress Bar */
    .progress-fill { transition: width 0.8s ease-in-out; }

    /* Confetti */
    .confetti { position: absolute; animation: confettiFall 1.5s ease-out forwards; z-index: 60; }
    @keyframes confettiFall { 
        0% { opacity: 1; transform: translateY(0) rotate(0deg); } 
        100% { opacity: 0; transform: translateY(150px) rotate(720deg); } 
    }
  </style>
 </head>
 <body class="h-full bg-[#0f172a] text-white">
  <div id="app" class="h-full overflow-auto pb-36" style="background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);">
   
   <div class="text-center pt-8 pb-4 px-4">
    <div class="inline-block relative mb-4">
        <div class="bg-yellow-400 rounded-full p-1">
            <img id="main-profile" src="https://cdn-icons-png.flaticon.com/512/3940/3940403.png" class="w-20 h-20 rounded-full object-cover border-2 border-white">
        </div>
        <span class="absolute -bottom-1 -right-1 text-2xl">üåô</span>
    </div>
    <h1 class="text-3xl font-extrabold text-yellow-400">Ramadan Aidin</h1>
    <p id="motivation-text" class="text-blue-200 text-sm italic mt-1 px-10 leading-tight">Sedia untuk kumpul pahala hari ini, Aidin?</p>
   </div>

   <div class="px-6 mb-6">
    <div class="bg-white/10 backdrop-blur-md rounded-[32px] p-5 border border-white/10 shadow-2xl">
        <div class="flex items-center justify-between mb-4">
            <button id="prev-day" class="w-10 h-10 rounded-full bg-indigo-600 flex items-center justify-center text-xl shadow-lg">‚Üê</button>
            <div class="text-center">
                <p class="text-[10px] uppercase font-bold text-white/40 tracking-[0.2em]">Hari Ramadan</p>
                <p id="current-day" class="text-4xl font-black text-yellow-300">1</p>
            </div>
            <button id="next-day" class="w-10 h-10 rounded-full bg-indigo-600 flex items-center justify-center text-xl shadow-lg">‚Üí</button>
        </div>

        <div class="space-y-2">
            <div class="flex justify-between text-[10px] font-black uppercase tracking-widest text-pink-400">
                <span id="level-label">Peringkat: Pemula üê£</span>
                <span id="progress-percent">0%</span>
            </div>
            <div class="bg-black/40 rounded-full h-3 overflow-hidden border border-white/5">
                <div id="progress-bar" class="progress-fill h-full bg-gradient-to-r from-yellow-400 to-orange-500" style="width: 0%"></div>
            </div>
        </div>
    </div>
   </div>

   <div id="activities-container" class="px-6 grid grid-cols-2 gap-4">
    </div>

   <div class="fixed bottom-6 left-6 right-6 z-50">
    <div class="bg-indigo-600/90 backdrop-blur-xl rounded-[30px] p-4 flex justify-between items-center shadow-[0_20px_50px_rgba(0,0,0,0.5)] border border-white/20">
        <div class="flex items-center gap-3">
            <div class="bg-yellow-400 w-10 h-10 rounded-full flex items-center justify-center shadow-inner">
                <span class="text-xl">‚≠ê</span>
            </div>
            <div>
                <p class="text-[10px] font-bold text-white/50 leading-none">JUMLAH BINTANG</p>
                <p id="total-stars" class="text-2xl font-black text-white leading-none">0</p>
            </div>
        </div>
        <div class="text-right">
            <p class="text-[10px] font-bold text-white/50 leading-none">STATUS AIDIN</p>
            <p id="level-name" class="text-sm font-black text-yellow-300 leading-none mt-1 uppercase">Hero Cilik</p>
        </div>
    </div>
   </div>

   <div id="celebration" class="fixed inset-0 pointer-events-none flex items-center justify-center z-50 hidden">
    <div id="confetti-container"></div>
   </div>
  </div>

  <script>
    /* NOTA UNTUK AYAH AIDIN:
       Gantikan link URL di bawah dengan gambar Aidin yang sebenar.
    */
    const IMEJ_AIDIN = {
        senyum: "https://cdn-icons-png.flaticon.com/512/3940/3940403.png", // Masukkan link gambar senyum
        sedih: "https://cdn-icons-png.flaticon.com/512/3940/3940405.png"    // Masukkan link gambar sedih/muncung
    };

    const senaraiAktiviti = [
        { id: 'sahur', emoji: 'üçö', label: 'Sahur', color: 'from-blue-500/20 to-blue-600/20' },
        { id: 'subuh', emoji: 'üïå', label: 'Subuh', color: 'from-indigo-500/20 to-indigo-600/20' },
        { id: 'ngaji', emoji: 'üìñ', label: 'Ngaji', color: 'from-emerald-500/20 to-emerald-600/20' },
        { id: 'bantu', emoji: 'üçΩÔ∏è', label: 'Bantu Ibu', color: 'from-pink-500/20 to-pink-600/20' },
        { id: 'zuhur', emoji: '‚òÄÔ∏è', label: 'Zuhur', color: 'from-yellow-500/20 to-orange-600/20' },
        { id: 'asar', emoji: 'üå§Ô∏è', label: 'Asar', color: 'from-orange-500/20 to-red-600/20' },
        { id: 'maghrib', emoji: 'üåÖ', label: 'Maghrib', color: 'from-purple-500/20 to-purple-600/20' },
        { id: 'isya', emoji: 'üåô', label: 'Isya', color: 'from-slate-600/20 to-slate-700/20' }
    ];

    // Load data dari LocalStorage
    let db = JSON.parse(localStorage.getItem('aidin_ramadan_final')) || { rekod: [] };
    let hariIni = new Date().getDate() <= 30 ? new Date().getDate() : 1;
    let paparanHari = hariIni;

    function simpan() {
        localStorage.setItem('aidin_ramadan_final', JSON.stringify(db));
    }

    function render() {
        const container = document.getElementById('activities-container');
        container.innerHTML = '';
        
        const dataHariTerpilih = db.rekod.filter(item => item.day === paparanHari);
        
        senaraiAktiviti.forEach(act => {
            const sudahBuat = dataHariTerpilih.some(d => d.id === act.id);
            const card = document.createElement('div');
            
            // Logik Gambar Aidin Senyum/Sedih
            const fotoUrl = sudahBuat ? IMEJ_AIDIN.senyum : IMEJ_AIDIN.sedih;
            const kelasFoto = sudahBuat ? 'status-done' : 'status-not-done';

            card.className = `activity-card relative flex flex-col items-center p-5 rounded-[40px] bg-gradient-to-br ${act.color} border border-white/5`;
            
            card.innerHTML = `
                <div class="relative mb-3">
                    <img src="${fotoUrl}" class="aidin-photo w-20 h-20 rounded-full object-cover ${kelasFoto}">
                    <div class="absolute -bottom-1 -right-1 bg-white rounded-full w-8 h-8 flex items-center justify-center shadow-lg border-2 border-indigo-900">
                        <span class="text-lg">${sudahBuat ? '‚≠ê' : act.emoji}</span>
                    </div>
                </div>
                <p class="font-black text-[11px] uppercase tracking-wider ${sudahBuat ? 'text-yellow-400' : 'text-white/40'} text-center">${act.label}</p>
            `;
            
            card.onclick = () => tekanAktiviti(act.id);
            container.appendChild(card);
        });

        kemaskiniStatistik();
    }

    function tekanAktiviti(id) {
        const index = db.rekod.findIndex(item => item.day === paparanHari && item.id === id);
        
        if (index > -1) {
            db.rekod.splice(index, 1);
        } else {
            db.rekod.push({ day: paparanHari, id: id });
            raikan();
        }
        
        simpan();
        render();
    }

    function kemaskiniStatistik() {
        document.getElementById('current-day').innerText = paparanHari;
        
        const jumlahBintang = db.rekod.length;
        document.getElementById('total-stars').innerText = jumlahBintang;
        
        // Kira hari yang ada sekurang-kurangnya 1 bintang
        const hariSelesai = new Set(db.rekod.map(i => i.day)).size;
        const peratus = Math.round((hariSelesai / 30) * 100);
        
        document.getElementById('progress-bar').style.width = `${peratus}%`;
        document.getElementById('progress-percent').innerText = `${peratus}%`;

        // Sistem Level & Mesej Dinamik
        let level = "Pemula üê£";
        let statusAidin = "Hero Cilik";
        let motivasi = "Ayo kumpul bintang hari ini, Aidin!";

        if(jumlahBintang > 10) { level = "Pejuang ‚öîÔ∏è"; statusAidin = "Super Aidin"; motivasi = "Hebatnya Aidin! Teruskan!"; }
        if(jumlahBintang > 40) { level = "Master üèÜ"; statusAidin = "Wira Ramadan"; motivasi = "Aidin memang anak soleh!"; }
        if(jumlahBintang > 100) { level = "Sultan üëë"; statusAidin = "Legenda"; motivasi = "Luar biasa! Aidin kebanggaan Ayah!"; }

        document.getElementById('level-label').innerText = `Peringkat: ${level}`;
        document.getElementById('level-name').innerText = statusAidin;
        document.getElementById('motivation-text').innerText = motivasi;
    }

    function raikan() {
        const container = document.getElementById('confetti-container');
        document.getElementById('celebration').classList.remove('hidden');
        container.innerHTML = '';
        for(let i=0; i<15; i++) {
            const conf = document.createElement('div');
            conf.className = 'confetti text-2xl';
            conf.innerText = ['‚ú®', '‚≠ê', 'üéä', 'üéâ'][Math.floor(Math.random()*4)];
            conf.style.left = Math.random() * 100 + '%';
            container.appendChild(conf);
        }
        setTimeout(() => document.getElementById('celebration').classList.add('hidden'), 1500);
    }

    document.getElementById('prev-day').onclick = () => { if(paparanHari > 1) { paparanHari--; render(); } };
    document.getElementById('next-day').onclick = () => { if(paparanHari < 30) { paparanHari++; render(); } };

    // Mula Aplikasi
    render();
  </script>
 </body>
</html>
